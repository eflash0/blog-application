<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<section class="comments-section mt-8">
    <h2 class="text-xl font-bold mb-4">Comments</h2>
    <div class="comments-list mb-4">
        <!-- Comment 1 -->
        <div *ngFor="let comment of comments" class="comment border-b border-muted p-4">
            <div class="flex items-center mb-2">
                <img src="https://www.w3schools.com/w3images/avatar2.png" alt="Commenter" class="w-8 h-8 rounded-full border mr-2" />
                <span class="font-semibold">{{comment.author.username}}</span>
                <span class="text-sm text-muted-foreground ml-2">{{ comment.createdAt | date:'MMMM d, yyyy' }}</span>
                <div *ngIf="isAdmin || comment.author.username == username" class="ml-auto flex gap-2">
                    <button class="text-blue-500 hover:underline">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="text-red-500 hover:underline">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
            <p>{{comment.content}}</p>
            <!-- Reply Button -->
            <button (click)="toggleReplies(comment)" class="text-blue-500 hover:underline mt-2">
                {{ comment.showReplies ? 'Hide Replies' : 'Show Replies' }}
            </button>
            <!-- Reply Form -->
            <div id="reply-alice" class="reply-form mt-4 hidden">
                <textarea placeholder="Add a reply..." rows="2" class="w-full p-2 border border-muted rounded mb-2"></textarea>
                <button class="bg-blue-500 text-white px-4 py-2 rounded">Post Reply</button>
            </div>
            <!-- Replies -->
            <div *ngIf="comment.showReplies" class="replies mt-4">
                <div *ngFor="let reply of comment.replies" class="reply border-l border-muted pl-4 ml-4">
                    <div class="flex items-center mb-2">
                        <img src="https://www.w3schools.com/w3images/avatar5.png" alt="Replier" class="w-8 h-8 rounded-full border mr-2" />
                        <span class="font-semibold">{{ reply.author.username }}</span>
                        <span class="text-sm text-muted-foreground ml-2">{{ reply.createdAt | date:'MMMM d, yyyy' }}</span>
                        <div class="ml-auto flex gap-2">
                            <button class="text-blue-500 hover:underline">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="text-red-500 hover:underline">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <p>{{ reply.content }}</p>
                </div>
            </div>
        </div>
    </div>
    <div class="comment-form">
        <textarea [(ngModel)]="comment.content" placeholder="Add a comment..." rows="4" class="w-full p-2 border border-muted rounded mb-2"></textarea>
        <button (click)="addComment()" type="submit" class="bg-pastel-rose text-white py-2 px-4 rounded-lg hover-rose focus:outline-none focus:ring-2 focus:ring-pastel-rose focus:ring-opacity-50">Post Comment</button>
    </div>
</section>
